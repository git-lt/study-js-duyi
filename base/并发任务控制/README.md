# 队列任务并发控制

## 背景

在某些场景下，我们需要控制队列任务的并发数量，比如同时发起多个请求，但是每个请求的并发数量不能超过某个值，这时我们可以使用队列任务并发控制来实现。

实际应用场景: 比如医院的排队叫号任务控制，同时只能叫一个号，叫号任务根据 `priority` 来排序，优先级高的先叫，优先级低的后叫。


## 排队叫号

排队叫号任务控制，每个科室一个叫号任务，每个叫号任务并发数量不能超过某个值，比如同时只能叫一个号，叫号任务根据 `priority` 来排序，优先级高的先叫，优先级低的后叫。

生成一个任务队列控制器 `SuperTask` 

单个科室叫号

 - 实例化一个控制器 `new SuperTask(max)`
 - 如果这个科室每次只叫一个号，则 `max` 为 1，如果同时叫两个号，则 `max` 为 2

多个科室叫号

- 实例化多个控制器 `new SuperTask(max)`
- 每个控制器逻辑与单个科室叫号一致